MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;Основной блок программы автоматической отправки данных о взвешиваниях
                      00002 ;информация об МК и конфигурационные биты
                      00003         include <MCSetup.inc>
                      00001 ;настройка микроконтроллера - выбор типа и конфигурации
                      00002         list p=16f887
                      00003         include <p16f887.inc>
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC16F887 processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2013 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
                      00809         LIST
                      00004         errorlevel      -302
  00002007            00005 _config1 equ 0X2007
  00002008            00006 _config2 equ 0X2008
                      00007 
Message[303]: Program word too large.  Truncated to core size. (E0A2)
2007   20A2           00008         __config _config1,  b'1110000010100010'
                      00009 ;бит15,14=1 не используются - читаются как 1;
                      00010 ;бит13=1 режим наплатной отладки отключен
                      00011 ;бит12=0 режим низковольтного программирования отключен
                      00012 ;бит11=0 Fail-Safe Clock Monitor is disabled
                      00013 ;бит10=0 Internal/External Switchover mode is disabled
                      00014 ;бит9,8=00 Brown-out Reset disabled 
                      00015 ;бит7=1 защита ППЗУ отключена
                      00016 ;бит6=0 защита памяти программ включена
                      00017 ;бит5=1 вывод RE3/MCLR это MCLR
                      00018 ;бит4=0 PWRT (таймер включения питания) включен
                      00019 ;бит3=0 WDT (сторожевой таймер) отключен
                      00020 ;бит2,1,0=010 HS тактовый генератор
                      00021 
Message[303]: Program word too large.  Truncated to core size. (F8FF)
2008   38FF           00022         __config _config2,      b'1111100011111111'
                      00023 ;бит10,9=0 включение защиты
                      00024 ;бит8=0 сброс по снижению напряжения до 2,1В
                      00025         ;генератор HS на 20МГц, нет защиты данных
                      00004 ;настройка выводов дисплея
                      00005         include <TM1621Setup.inc>
                      00001         ;RB0 - CS, RB1 - WR, RB2 - DATA
                      00002         #define CS_IN PORTB,0
                      00003         #define WR_IN PORTB,1
                      00004         #define DATA_IN PORTB,2
                      00006 ;коды дисплея
                      00007         include <TM1621.inc>
                      00001 ;-----таблица соответсвия символов чтобы легко было менять для других индикаторов------------
  0000007D            00002 simb0 equ 0x7D ;код символа "0"
  00000060            00003 simb1 equ 0x60 ;код символа "1" 
  0000003E            00004 simb2 equ 0x3E ;код символа "2"
  0000007A            00005 simb3 equ 0x7A ;код символа "3"
  00000063            00006 simb4 equ 0x63 ;код символа "4"
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0000005B            00007 simb5 equ 0x5B ;код символа "5","S"
  0000005F            00008 simb6 equ 0x5F ;код символа "6"
  00000070            00009 simb7 equ 0x70 ;код символа "7"
  0000007F            00010 simb8 equ 0x7F ;код символа "8"
  0000007B            00011 simb9 equ 0x7B ;код символа "9"
  000000FD            00012 simb0_ equ 0xFD ;код символа ".0"
  000000E0            00013 simb1_ equ 0xE0 ;код символа ".1"
  000000BE            00014 simb2_ equ 0xBE ;код символа ".2"
  000000FA            00015 simb3_ equ 0xFA ;код символа ".3"
  000000E3            00016 simb4_ equ 0xE3 ;код символа ".4"
  000000DB            00017 simb5_ equ 0xDB ;код символа ".5"
  000000DF            00018 simb6_ equ 0xDF ;код символа ".6"
  000000F0            00019 simb7_ equ 0xF0 ;код символа ".7"
  000000FF            00020 simb8_ equ 0xFF ;код символа ".8"
  000000FB            00021 simb9_ equ 0xFB ;код символа ".9"
  00000077            00022 simbA equ 0x77 ;код символа "A"
  0000004F            00023 simbb equ 0x4F ;код символа "b"
  0000001D            00024 simbC equ 0x1D ;код символа "C"
  0000006E            00025 simbd equ 0x6E ;код символа "d"
  0000001F            00026 simbE equ 0x1F ;код символа "E"
  00000017            00027 simbF equ 0x17 ;код символа "F"
  0000005D            00028 simbG equ 0x5D ;код символа "G"
  00000067            00029 simbH equ 0x67 ;код символа "H"
  0000006C            00030 simbJ equ 0x6C ;код символа "J"
  0000000D            00031 simbL equ 0x0D ;код символа "L"
  00000046            00032 simbn equ 0x46 ;код символа "n"
  00000037            00033 simbP equ 0x37 ;код символа "P"
  00000006            00034 simbr equ 0x06 ;код символа "r"
  0000000F            00035 simbt equ 0x0F ;код символа "t"
  0000006D            00036 simbU equ 0x6D ;код символа "U"
  0000006B            00037 simbY equ 0x6B ;код символа "Y"
  00000002            00038 simbmin equ 0x02 ;код символа "минус"
  00000000            00039 empty equ 0x00 ;код символа "пусто"
                      00008 ;объявляем переменные для главного модуля
  0000                00009         global LCD_bufer, bufer_count
                      00010 
                      00011         udata
                      00012 ;переменные для захвата данных с дисплея
0000                  00013 LCD_bufer       res .18 ;адрес ячейки начиная с которой располагается буфер
0012                  00014 bufer_count     res .1 ;счетчик общего количества принятых бит (должен распологаться сразу после буфера)
0013                  00015 bit_buffer      res .1 ;счетчик бит при захвате с дисплея
0014                  00016 byte_buffer     res .1 ;счетчик байт при захвате с дисплея
                      00017 ;-----------------------------------------
                      00018 ;подключаем внешние программные модули
                      00019         ;подключение модуля вывода на дисплей
  0000                00020         extern simb_pos, Display_Data, Data_to_LCD  ;<TM1621LCD.asm>
  0000                00021         extern init_LCD, LCD_Data_Duplicate, PrintSimb,PrintMsg  ;<TM1621LCD.asm>
  0000                00022         extern PrintFirstStr, PrintSecondStr, PrintThirdStr;<TM1621LCD.asm>
  0000                00023         extern SetKoma, ClrKoma, KomaPos, koma_set
                      00024         ;подключение модуля пауз
  0000                00025         extern pause_5s, pause_1s, pause_05s ;<pauses_20MHz.asm>
                      00026         ;подключение модуля распознавания данных выводимых весами на дисплей
  0000                00027         extern LCD_Data_Recognize ;<TM1621Recognize.asm>
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0000                00028         extern seg1_1,seg1_2,seg1_3,seg1_4,seg1_5;<TM1621Recognize.asm>
  0000                00029         extern seg2_1,seg2_2,seg2_3,seg2_4,seg2_5;<TM1621Recognize.asm>
  0000                00030         extern seg3_1,seg3_2,seg3_3,seg3_4,seg3_5,seg3_6;<TM1621Recognize.asm>
  0000                00031         extern koma;<TM1621Recognize.asm>
                      00032         ;подключение модуля Tiny RTC - работа с часами DS1307
  0000                00033         extern HH,MM,SS,WD,DD,MO,YY ;<RTCTime.asm>
  0000                00034         extern ReadRTCData, ReadTime, ReadDate, ReadDayofWeek;<RTCTime.asm>
  0000                00035         extern WriteRTC, WriteTime, WriteDate, WriteDayofWeek;<RTCTime.asm>
                      00036         ;подключение модуля Tiny RTC - работа с ППЗУ 24C32N     
                      00037         
                      00038 
                      00039 ;-----------------------------------------------------------------------
                      00040 ;макросы
                      00041         include <macroTM1621.inc>
                      00001 ;-----------------------------------------------------------------------
                      00002 ;печать всех разрядов дисплея в видестроки без запятых (16 символов)
                      00003 ;запятые задаются отдельно
                      00004 PRINT_STR MACRO S1,S2,S3,S4,S5,S6,S7,S8,S9,S10,S11,S12,S13,S14,S15,S16  
                      00005         banksel seg1_1
                      00006         movlw S1
                      00007         movwf seg1_1
                      00008         movlw S2
                      00009         movwf seg1_2
                      00010         movlw S3
                      00011         movwf seg1_3
                      00012         movlw S4
                      00013         movwf seg1_4
                      00014         movlw S5
                      00015         movwf seg1_5    
                      00016         movlw S6
                      00017         movwf seg2_1
                      00018         movlw S7
                      00019         movwf seg2_2
                      00020         movlw S8
                      00021         movwf seg2_3
                      00022         movlw S9
                      00023         movwf seg2_4
                      00024         movlw S10
                      00025         movwf seg2_5
                      00026         movlw S11
                      00027         movwf seg3_1
                      00028         movlw S12
                      00029         movwf seg3_2
                      00030         movlw S13
                      00031         movwf seg3_3
                      00032         movlw S14
                      00033         movwf seg3_4
                      00034         movlw S15
                      00035         movwf seg3_5
                      00036         movlw S16
                      00037         movwf seg3_6
                      00038         movlw seg1_1            
                      00039         lcall PrintMsg
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00040         pagesel $
                      00041         ENDM
                      00042 ;-----------------------------------------------------------------------
                      00043 ;печать первой строки без запятых (5 символов)
                      00044 PRINT_STR_1 MACRO S1,S2,S3,S4,S5  
                      00045         banksel seg1_1
                      00046         movlw S1
                      00047         movwf seg1_1
                      00048         movlw S2
                      00049         movwf seg1_2
                      00050         movlw S3
                      00051         movwf seg1_3
                      00052         movlw S4
                      00053         movwf seg1_4
                      00054         movlw S5
                      00055         movwf seg1_5    
                      00056         movlw seg1_1            
                      00057         lcall PrintFirstStr
                      00058         pagesel $
                      00059         ENDM
                      00060 ;-----------------------------------------------------------------------
                      00061 ;печать 2ой строки без запятых (5 символов)
                      00062 PRINT_STR_2 MACRO S1,S2,S3,S4,S5  
                      00063         banksel seg2_1
                      00064         movlw S1
                      00065         movwf seg2_1
                      00066         movlw S2
                      00067         movwf seg2_2
                      00068         movlw S3
                      00069         movwf seg2_3
                      00070         movlw S4
                      00071         movwf seg2_4
                      00072         movlw S5
                      00073         movwf seg2_5    
                      00074         movlw seg2_1            
                      00075         lcall PrintSecondStr
                      00076         pagesel $
                      00077         ENDM
                      00078 ;-----------------------------------------------------------------------
                      00079 ;печать 3й строки !без запятых (6 символов)
                      00080 PRINT_STR_3 MACRO S1,S2,S3,S4,S5,S6  
                      00081         banksel seg3_1
                      00082         movlw S1
                      00083         movwf seg3_1
                      00084         movlw S2
                      00085         movwf seg3_2
                      00086         movlw S3
                      00087         movwf seg3_3
                      00088         movlw S4
                      00089         movwf seg3_4
                      00090         movlw S5
                      00091         movwf seg3_5    
                      00092         movlw S6
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00093         movwf seg3_6
                      00094         movlw seg3_1            
                      00095         lcall PrintThirdStr
                      00096         pagesel $
                      00097         ENDM
                      00098 ;-----------------------------------------------------------------------
                      00099 ;установить запятую в позицию POS
                      00100 SET_KOMA MACRO POS
                      00101         banksel KomaPos
                      00102         movlw POS
                      00103         movwf KomaPos
                      00104         movlw koma
                      00105         lcall SetKoma
                      00106         movlw koma      
                      00107         lcall koma_set
                      00108         movlw Display_Data
                      00109         lcall Data_to_LCD
                      00110         pagesel $
                      00111         ENDM
                      00112 ;-----------------------------------------------------------------------
                      00113 ;удалить запятую в позиции POS
                      00114 CLR_KOMA MACRO POS
                      00115         banksel KomaPos
                      00116         movlw POS
                      00117         movwf KomaPos
                      00118         movlw koma
                      00119         lcall ClrKoma
                      00120         movlw koma
                      00121         lcall koma_set
                      00122         movlw Display_Data
                      00123         lcall Data_to_LCD
                      00124         pagesel $
                      00125         ENDM
                      00126 ;-----------------------------------------------------------------------
                      00127 ;Напечатать символ SIMB в позиции POS
                      00128 PRINT_SIMB MACRO SIMB, POS ;POS 1..16
                      00129         banksel simb_pos
                      00130         movlw POS
                      00131         movwf simb_pos
                      00132         movlw SIMB      
                      00133         lcall PrintSimb
                      00134         pagesel $
                      00135         ENDM
                      00136 ;----------------------------------------------------------------------
                      00042 ;1)печать всех разрядов дисплея в видестроки !без запятых (16 символов)
                      00043 ;PRINT_STR MACRO S1,S2,S3,S4,S5,S6,S7,S8,S9,S10,S11,S12,S13,S14,S15,S16 
                      00044 ;2)печать первой строки !без запятых (5 символов)
                      00045 ;PRINT_STR_1 MACRO S1,S2,S3,S4,S5  
                      00046 ;3)печать 2ой строки !без запятых (5 символов)
                      00047 ;PRINT_STR_2 MACRO S1,S2,S3,S4,S5 
                      00048 ;4)печать 3й строки !без запятых (6 символов)
                      00049 ;PRINT_STR_3 MACRO S1,S2,S3,S4,S5,S6 
                      00050 ;5)установить запятую в позицию POS (1-16)
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00051 ;SET_KOMA MACRO POS
                      00052 ;6)удалить запятую в позиции POS (1-16)
                      00053 ;CLR_KOMA MACRO POS  
                      00054 ;7)Напечатать символ SIMB в позиции POS
                      00055 ;PRINT_SIMB MACRO SIMB, POS
                      00056         include <macroTinyRTC.inc>
                      00001 ;макросы для работы с модулем часов реального времени
                      00002 ;------------------------------------------------------------------------
                      00003 ;макрос записи показателей времени из констант - данные записанны в формате BCD
                      00004 WRITE_RTC MACRO HOURS, MINUTES, SECONDS, DAY_of_WEEK, DATE, MONTH, YEAR
                      00005         banksel HH
                      00006         movlw HOURS
                      00007         movwf HH
                      00008         movlw MINUTES
                      00009         movwf MM
                      00010         movlw SECONDS
                      00011         movwf SS
                      00012         movlw YEAR
                      00013         movwf YY
                      00014         movlw MONTH
                      00015         movwf MO
                      00016         movlw DATE
                      00017         movwf DD
                      00018         movlw DAY_of_WEEK
                      00019         movwf WD
                      00020         lcall WriteRTC
                      00021         pagesel $
                      00022         ENDM
                      00023 ;------------------------------------------------------------------------
                      00024 ;макрос записи времени из констант - данные записанны в формате BCD
                      00025 WRITE_TIME MACRO HOURS, MINUTES, SECONDS
                      00026         banksel HH
                      00027         movlw HOURS
                      00028         movwf HH
                      00029         movlw MINUTES
                      00030         movwf MM
                      00031         movlw SECONDS
                      00032         movwf SS
                      00033         lcall WriteTime
                      00034         pagesel $
                      00035         ENDM
                      00036 ;------------------------------------------------------------------------
                      00037 ;макрос записи даты из констант - данные записанны в формате BCD
                      00038 WRITE_DATE MACRO DATE, MONTH, YEAR
                      00039         banksel YY      
                      00040         movlw YEAR
                      00041         movwf YY
                      00042         movlw MONTH
                      00043         movwf MO
                      00044         movlw DATE
                      00045         movwf DD
                      00046         lcall WriteDate
                      00047         pagesel $
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00048         ENDM
                      00049 ;------------------------------------------------------------------------
                      00050 ;макрос записи дня недели из константы - данные записанны в формате BCD
                      00051 WRITE_DAY_of_WEEK MACRO DAY_of_WEEK
                      00052         banksel WD
                      00053         movlw DAY_of_WEEK
                      00054         movwf WD
                      00055         lcall WriteDayofWeek
                      00056         pagesel $
                      00057         ENDM
                      00057 ;1)макрос записи показателей времени из констант - данные записанны в формате BCD
                      00058 ;WRITE_RTC MACRO HOURS, MINUTES, SECONDS, DAY_of_WEEK, DATE, MONTH, YEAR
                      00059 ;2)макрос записи времени из констант - данные записанны в формате BCD
                      00060 ;WRITE_TIME MACRO HOURS, MINUTES, SECONDS
                      00061 ;3)макрос записи даты из констант - данные записанны в формате BCD
                      00062 ;WRITE_DATE MACRO DATE, MONTH, YEAR
                      00063 ;4)макрос записи дня недели из константы - данные записанны в формате BCD
                      00064 ;WRITE_DAY_of_WEEK MACRO DAY_of_WEEK
                      00065 ;-----------------------------------------------------------------------
                      00066 
                      00067 ;пишем начальные значения ППЗУ
                      00068 
                      00069         org 0x0000
0000   2???           00070         goto start
                      00071         org 0x0004 ;вектор прерываний
                      00072 ;-----------------------------------------------------------------------
0004   138B           00073         bcf INTCON,7 ;запрещаем прерывания
                      00074         ;выясняем источник прерывания
                      00075         ;btfsc PIR1,0 ;(TMR1IF)
                      00076         ;goto TMR1_int ;идем на обработку прерывания от таймера 1
                      00077 
                      00078 ;Захват данных с дисплея весов
                      00079         include <TM1621Capture.inc> ;захват даныых с дисплея
                      00001 ;Захват данных с весов на драйвер TM1621
                      00002 ;выполнен в виде встраиваемого файла т.к. помещается в блок обработки прерываний
                      00003 ;Блок захвата и распознавания данных с весов
                      00004 ;- Захватить и сохранить в памяти пакет подаваемый на дисплей
                      00005 ;LCD_Data_Capture(LCD_bufer)  
                      00006 ;LCD_bufer – адрес ячейки начиная с которой располагается буфер для чтения данных – функция размещается 
                            в блоке обработки внешнего прерывания 
0005                  00007 LCD_Data_Capture
                      00008         ;как только вывод CS ушел в нижнее состояние ждем высокого на WR
                      00009         ;banksel bit_buffer
0005                  00010 next_lcd_byte
0005   3008           00011         movlw .8        
0006   00??           00012         movwf bit_buffer
0007                  00013 next_lcd_bit
                      00014         ;если на WR пришло высокое сохраняем очередной бит в память
0007                  00015 wait_WR0;ждем WR низкого
0007   1806           00016         btfsc CS_IN ;не выходим из обработчика прерывания пока CS в низком состоянии
0008   2???           00017         goto test_lcd_bytes
0009   1886           00018         btfsc WR_IN
000A   2???           00019         goto wait_WR0
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000B                  00020 wait_WR1
000B   1806           00021         btfsc CS_IN ;не выходим из обработчика прерывания пока CS в низком состоянии
000C   2???           00022         goto test_lcd_bytes
000D   1C86           00023         btfss WR_IN
000E   2???           00024         goto wait_WR1
                      00025         ;WR высокое значит сохраняем
000F   0D80           00026         rlf INDF,1 ;сдвигаем влево
0010   1000           00027         bcf INDF, 0
0011   1906           00028         btfsc DATA_IN
0012   1400           00029         bsf INDF,0;DATA=1
0013   0A??           00030         incf bufer_count, 1 ;увеличиваем счетчик общего количества принятых бит
                      00031         ;проверяем обработали ли мы уже 8 бит
0014   0B??           00032         decfsz bit_buffer,1
0015   2???           00033         goto next_lcd_bit ;если нет идем обрабатывать следующий
0016   0A??           00034         incf byte_buffer,1 ;если да переходим к следующему байту
0017   0A84           00035         incf FSR,1 ;переходим к следующей ячейке хранения LCD_buferХ
0018   0B??           00036         decfsz byte_buffer,1
0019   2???           00037         goto next_lcd_byte
001A   2???           00038         goto exit_int;если значение уже 18 - это явно перебор (!!! данные не верные)
001B                  00039 test_lcd_bytes  
                      00040         ;если первые 3 бита не 101 (команда записи) - игнорируем - выходим
001B   ???? ????      00041         banksel LCD_bufer
001D   08??           00042         movf LCD_bufer, 0
001E   39E0           00043         andlw 0xE0
001F   3AA0           00044         xorlw 0xA0
0020   1D03           00045         btfss STATUS, Z
0021   2???           00046         goto exit_int ;значит это не команда которая выводит символы - выходим  
                      00047         ;если CS перешло в высокое, а не накопилось хотя бы 12 бит - это мусорный код
0022   300C           00048         movlw .12
0023   ???? ????      00049         banksel bufer_count
0025   02??           00050         subwf bufer_count,0 ;W=bufer_count-12
0026   1C03           00051         btfss STATUS, C
0027   2???           00052         goto exit_int;если bufer_count меньше 12 выходим
                      00053         ;если bufer_count больше или равно 12 идем дальше
                      00054         ;если CS перешло в высокое, а не накопилось больше или равно 42 бита - это мусорный код
0028   308A           00055         movlw .138
0029   02??           00056         subwf bufer_count,0 ;W=bufer_count-138
002A   1803           00057         btfsc STATUS, C
002B   2???           00058         goto exit_int;если bufer_count больше или равно 138 выходим
                      00059         ;если bufer_count меньше 138 идем дальше
                      00060 
                      00061         ;!!!поскольку количество принятых бит в последнем байте может 
                      00062         ;быть не кратно 8 нужно проверить и сдвинуть на соответствующее число
002C   1800           00063         btfsc LCD_bufer+.17,0;!!!!!!временно    
002D   1780           00064         bsf LCD_bufer+.17,7;!!!!!!временно
002E   2???           00065         goto temp_exit ;!!!!!!временно пропускаем эту процедуру
                      00066 ;       movlw 0x07
                      00067 ;       andwf bufer_count,0
                      00068 ;       btfsc STATUS,Z
                      00069 ;       goto dupl_recog ;если не надо сдвигать дем дальше
                      00070 ;       sublw .8 ;W=8-W тут на сколько нужно сдвинуть последний байт
                      00071 ;       movwf temp
                      00072 ;shft_last
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00073 ;       rlf INDF,1
                      00074 ;       decfsz temp,1
                      00075 ;       goto shft_last  
002F                  00076 temp_exit ;!!!!!!временно
                      00077 ;!!!!!!!!!!!!ТУТ МОЖЕТ БЫТЬ РАСПОЗНОВАНИЕ И Т.Д.
002F   30??           00078         movlw LCD_bufer
0030   ???? ???? 2??? 00079         lcall LCD_Data_Duplicate ;<TM1621LCD.asm>
0033                  00080 exit_int
0033   ???? ???? 2??? 00081         lcall clr_bufer ;<TM1621ClrBuf.inc>;процедура очистки буфера полученных с дисплея данных
0036   ???? ????      00082         pagesel $
Warning[207]: Found label after column 1. (SET_BANK0)
0038                  00083         SET_BANK0
0038   0009           00084         retfie
                      00080         include <TM1621ClrBuf.inc>  ;очистка указателей на буфер дисплея
                      00001 ;подготовка и очистка буфера перед записью
0039                  00002 clr_bufer
0039   ???? ????      00003         banksel bufer_count 
003B   01??           00004         clrf bufer_count 
003C   30??           00005         movlw LCD_bufer ;начало буфера
003D   0084           00006         movwf FSR
003E   3012           00007         movlw .18 ;
003F   00??           00008         movwf byte_buffer ;счетчик заполненных байт буфера
0040   01??           00009         clrf LCD_bufer+.17
0041   0008           00010         return
                      00081 ;-----------------------------------------------------------------------        
0042                  00082 start
0042   ???? ???? 2??? 00083         lcall initMC;<initMC.inc> Инициализация микроконтроллера
0045   ???? ???? 2??? 00084         lcall init_LCD;<TM1621LCD.asm> инициализация дисплея    
0048   ???? ???? 2??? 00085         lcall pause_05s ;<pauses_20MHz.asm>пауза
004B   ???? ???? 2??? 00086         lcall clr_bufer ;<TM1621ClrBuf.inc> очистка указателей на буфер дисплея
004E   ???? ????      00087         pagesel $
                      00088         ;тестируем функции печати
0050   ???? ????      00089         banksel koma
0052   01??           00090         clrf koma
0053   01??           00091         clrf koma+.1
                      00092 
                      00093         PRINT_STR 't','1','n','n','E',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' '
0054   ???? ????          M         banksel seg1_1
0056   3074               M         movlw 't'
0057   00??               M         movwf seg1_1
0058   3031               M         movlw '1'
0059   00??               M         movwf seg1_2
005A   306E               M         movlw 'n'
005B   00??               M         movwf seg1_3
005C   306E               M         movlw 'n'
005D   00??               M         movwf seg1_4
005E   3045               M         movlw 'E'
005F   00??               M         movwf seg1_5    
0060   3020               M         movlw ' '
0061   00??               M         movwf seg2_1
0062   3020               M         movlw ' '
0063   00??               M         movwf seg2_2
0064   3020               M         movlw ' '
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0065   00??               M         movwf seg2_3
0066   3020               M         movlw ' '
0067   00??               M         movwf seg2_4
0068   3020               M         movlw ' '
0069   00??               M         movwf seg2_5
006A   3020               M         movlw ' '
006B   00??               M         movwf seg3_1
006C   3020               M         movlw ' '
006D   00??               M         movwf seg3_2
006E   3020               M         movlw ' '
006F   00??               M         movwf seg3_3
0070   3020               M         movlw ' '
0071   00??               M         movwf seg3_4
0072   3020               M         movlw ' '
0073   00??               M         movwf seg3_5
0074   3020               M         movlw ' '
0075   00??               M         movwf seg3_6
0076   30??               M         movlw seg1_1            
0077   ???? ???? 2???     M         lcall PrintMsg
007A   ???? ????          M         pagesel $
007C   ???? ???? 2??? 00094         lcall pause_1s
007F   ???? ????      00095         pagesel $
                      00096 
                      00097         SET_KOMA .8
0081   ???? ????          M         banksel KomaPos
0083   3008               M         movlw .8
0084   00??               M         movwf KomaPos
0085   30??               M         movlw koma
0086   ???? ???? 2???     M         lcall SetKoma
0089   30??               M         movlw koma      
008A   ???? ???? 2???     M         lcall koma_set
008D   30??               M         movlw Display_Data
008E   ???? ???? 2???     M         lcall Data_to_LCD
0091   ???? ????          M         pagesel $
                      00098         SET_KOMA .10
0093   ???? ????          M         banksel KomaPos
0095   300A               M         movlw .10
0096   00??               M         movwf KomaPos
0097   30??               M         movlw koma
0098   ???? ???? 2???     M         lcall SetKoma
009B   30??               M         movlw koma      
009C   ???? ???? 2???     M         lcall koma_set
009F   30??               M         movlw Display_Data
00A0   ???? ???? 2???     M         lcall Data_to_LCD
00A3   ???? ????          M         pagesel $
                      00099 
                      00100         ;пишем время в часы
                      00101         WRITE_RTC 0x10, 0x45, 0x00,.3, 0x21, 0x02, 0x18
00A5   ???? ????          M         banksel HH
00A7   3010               M         movlw 0x10
00A8   00??               M         movwf HH
00A9   3045               M         movlw 0x45
00AA   00??               M         movwf MM
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00AB   3000               M         movlw 0x00
00AC   00??               M         movwf SS
00AD   3018               M         movlw 0x18
00AE   00??               M         movwf YY
00AF   3002               M         movlw 0x02
00B0   00??               M         movwf MO
00B1   3021               M         movlw 0x21
00B2   00??               M         movwf DD
00B3   3003               M         movlw .3
00B4   00??               M         movwf WD
00B5   ???? ???? 2???     M         lcall WriteRTC
00B8   ???? ????          M         pagesel $
                      00102         
00BA                  00103 time_to_LCD
                      00104         ;читаем время из часов
00BA   ???? ???? 2??? 00105         lcall ReadRTCData
00BD   ???? ????      00106         pagesel $
                      00107         ;выводим время в 3ю строку
00BF   ???? ????      00108         banksel HH
00C1   0E??           00109         swapf HH,0
00C2   390F           00110         andlw 0x0F
00C3   3E30           00111         addlw 0x30
00C4   ???? ????      00112         banksel seg3_1
00C6   00??           00113         movwf seg3_1
                      00114 
00C7   ???? ????      00115         banksel HH
00C9   08??           00116         movf HH,0
00CA   390F           00117         andlw 0x0F
00CB   3E30           00118         addlw 0x30      
00CC   ???? ????      00119         banksel seg3_2
00CE   00??           00120         movwf seg3_2
                      00121 
00CF   ???? ????      00122         banksel MM
00D1   0E??           00123         swapf MM,0
00D2   390F           00124         andlw 0x0F
00D3   3E30           00125         addlw 0x30
00D4   ???? ????      00126         banksel seg3_3
00D6   00??           00127         movwf seg3_3
                      00128 
00D7   ???? ????      00129         banksel MM
00D9   08??           00130         movf MM,0
00DA   390F           00131         andlw 0x0F
00DB   3E30           00132         addlw 0x30      
00DC   ???? ????      00133         banksel seg3_4
00DE   00??           00134         movwf seg3_4
                      00135 
00DF   ???? ????      00136         banksel SS
00E1   0E??           00137         swapf SS,0
00E2   390F           00138         andlw 0x0F
00E3   3E30           00139         addlw 0x30
00E4   ???? ????      00140         banksel seg3_5
00E6   00??           00141         movwf seg3_5
                      00142 
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00E7   ???? ????      00143         banksel SS
00E9   08??           00144         movf SS,0
00EA   390F           00145         andlw 0x0F
00EB   3E30           00146         addlw 0x30      
00EC   ???? ????      00147         banksel seg3_6
00EE   00??           00148         movwf seg3_6
                      00149         
00EF   30??           00150         movlw seg3_1            
00F0   ???? ???? 2??? 00151         lcall PrintThirdStr
00F3   ???? ????      00152         pagesel $
                      00153 
00F5   ???? ???? 2??? 00154         lcall pause_1s
00F8   ???? ????      00155         pagesel $
                      00156 ;       bsf INTCON,7
00FA   2???           00157         goto time_to_LCD
                      00158 
                      00159 ;Распознавание пришедших данных
                      00160 
                      00161 ;Определяем превышен ли минимальный вес реакции
                      00162 
                      00163 ;Если превышен засекаем установленное в настройках время
                      00164 
                      00165 ;Если время прошло, а данные не поменялись - отправляем их на сервер
                      00166 
                      00167 ;Если отправка не удалась - сохраняем данные во внутренней памяти
                      00168 
                      00169 ;Инициализация микроконтроллера
                      00170         include <initMC.inc>
                      00001 ;Инициализация МК с указанием выводов, вкл/выкл переферии
00FB                  00002 initMC
00FB   1683 1703      00003         banksel ANSEL
00FD   0188           00004         clrf ANSEL
00FE   0189           00005         clrf ANSELH
00FF   0185           00006         clrf WDTCON
0100   1283 1703      00007         banksel CM1CON0
0102   0187           00008         clrf CM1CON0    ;Вимкнути компаратори
0103   0188           00009         clrf CM2CON0
0104   1283 1303      00010         banksel T1CON
0106   3031           00011         movlw b'00110001'
0107   0090           00012         movwf   T1CON ;вкл TMR1 коэф 1:8 внутренний тактовый сигнал
0108   1683 1303      00013         banksel VRCON
010A   1397           00014         bcf     VRCON, VREN      ;Вимкнути джерело опорної напруги
010B   1317           00015         bcf     VRCON, VROE ;вольтаж ИОН отключен от RA2
010C   30A8           00016         movlw b'10101000'
010D   0081           00017         movwf OPTION_REG 
                      00018         ;бит 7 RBPU=1 - подтягивающие резисторы отключены
                      00019         ;бит 6 INTEDG=0 - внешнее прерывание по заднему фронту
                      00020         ;бит 5 T0CS=1 - внутренний источник приращения таймера 0 
                      00021         ;бит 4 T0SE=0 - приращение таймера по переднему фронту
                      00022         ;бит 3 PSA=1 - предделитель перед WDT 
                      00023         ;биты 2-0 RS2-RS0=000 - коэффициент предделителя 1:1
010E   3050           00024         movlw b'01010000';разрешение прерываний - внешнего прерывания (пока отключены)
010F   008B           00025         movwf INTCON ;(чтобы раньше времени не пришло прерывание)
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00026 ;       bsf PIE1,0 ;(TMR1IE) разрешение прерывания от таймера 1 
0110   1683 1303      00027         banksel TRISA
                      00028         ;изначально все выводы настроены на выход
0112   0103           00029         clrw
0113   0085           00030         movwf TRISA
0114   0087           00031         movwf TRISC
0115   0088           00032         movwf TRISD
0116   0089           00033         movwf TRISE
0117   0086           00034         movwf TRISB
                      00035         ;согласно документации при использовании приемопередатчика PORTB<2:1>=1
                      00036         ;теперь настраивается направление выводов в зависимости от настроек
                      00037         ;поскольку регистры TRISx и PORTx по тем же адресам но в разных банках
                      00038         ;можно направления менять с учетом define
0118   1406           00039         bsf CS_IN ;устанавливаем входы согласно настроек дисплея
0119   1486           00040         bsf WR_IN
011A   1506           00041         bsf DATA_IN
011B   1283 1303      00042         banksel PORTA
011D   0185           00043         clrf PORTA
011E   0186           00044         clrf PORTB ;инициализация защелок портов
011F   0187           00045         clrf PORTC 
0120   0188           00046         clrf PORTD
0121   0189           00047         clrf PORTE
0122   1283           00048         bcf STATUS,RP0 ;переходим в нулевой банк
0123   100C           00049         bcf PIR1, 0
0124   0008           00050         return
0125   2???           00171         goto $
Message[303]: Program word too large.  Truncated to core size. (E0A2)
Message[303]: Program word too large.  Truncated to core size. (F8FF)
20A2 38FF             00172         end
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE 14


SYMBOL TABLE
  LABEL                             VALUE 

ABDEN                             00000000
ABDOVF                            00000007
ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
ANS0                              00000000
ANS1                              00000001
ANS10                             00000002
ANS11                             00000003
ANS12                             00000004
ANS13                             00000005
ANS2                              00000002
ANS3                              00000003
ANS4                              00000004
ANS5                              00000005
ANS6                              00000006
ANS7                              00000007
ANS8                              00000000
ANS9                              00000001
ANSEL                             00000188
ANSELH                            00000189
BAUDCTL                           00000187
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BRG0                              00000000
BRG1                              00000001
BRG10                             00000002
BRG11                             00000003
BRG12                             00000004
BRG13                             00000005
BRG14                             00000006
BRG15                             00000007
BRG16                             00000003
BRG2                              00000002
BRG3                              00000003
BRG4                              00000004
BRG5                              00000005
BRG6                              00000006
BRG7                              00000007
BRG8                              00000000
BRG9                              00000001
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE 15


SYMBOL TABLE
  LABEL                             VALUE 

BRGH                              00000002
C                                 00000000
C1CH0                             00000000
C1CH1                             00000001
C1IE                              00000005
C1IF                              00000005
C1OE                              00000005
C1ON                              00000007
C1OUT                             00000006
C1POL                             00000004
C1R                               00000002
C1RSEL                            00000005
C1SEN                             00000005
C2CH0                             00000000
C2CH1                             00000001
C2IE                              00000006
C2IF                              00000006
C2OE                              00000005
C2ON                              00000007
C2OUT                             00000006
C2POL                             00000004
C2R                               00000002
C2REN                             00000004
C2RSEL                            00000004
C2SYNC                            00000000
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1                             00000015
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2                             0000001B
CCPR2H                            0000001C
CCPR2L                            0000001B
CHS0                              00000002
CHS1                              00000003
CHS2                              00000004
CHS3                              00000005
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE 16


SYMBOL TABLE
  LABEL                             VALUE 

CKE                               00000006
CKP                               00000004
CLR_KOMA                          
CM1CON0                           00000107
CM2CON0                           00000108
CM2CON1                           00000109
CREN                              00000004
CSRC                              00000007
CS_IN                             PORTB,0
ClrKoma                           00000000
D                                 00000005
DATA_ADDRESS                      00000005
DATA_IN                           PORTB,2
DC                                00000001
DC1B0                             00000004
DC1B1                             00000005
DC2B0                             00000004
DC2B1                             00000005
DD                                00000000
D_A                               00000005
D_NOT_A                           00000005
Data_to_LCD                       00000000
Display_Data                      00000000
ECCPAS                            0000009C
ECCPAS0                           00000004
ECCPAS1                           00000005
ECCPAS2                           00000006
ECCPASE                           00000007
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDAT                             0000010C
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
F                                 00000001
FERR                              00000002
FSR                               00000004
FVREN                             00000000
GCEN                              00000007
GIE                               00000007
GO                                00000001
GO_DONE                           00000001
GO_NOT_DONE                       00000001
HH                                00000000
HTS                               00000002
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE 17


SYMBOL TABLE
  LABEL                             VALUE 

INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IOCB                              00000096
IOCB0                             00000000
IOCB1                             00000001
IOCB2                             00000002
IOCB3                             00000003
IOCB4                             00000004
IOCB5                             00000005
IOCB6                             00000006
IOCB7                             00000007
IRCF0                             00000004
IRCF1                             00000005
IRCF2                             00000006
IRP                               00000007
KomaPos                           00000000
LCD_Data_Capture                  00000005
LCD_Data_Duplicate                00000000
LCD_Data_Recognize                00000000
LCD_bufer                         00000000
LTS                               00000001
MC1OUT                            00000007
MC2OUT                            00000006
MM                                00000000
MO                                00000000
MSK                               00000093
MSK0                              00000000
MSK1                              00000001
MSK2                              00000002
MSK3                              00000003
MSK4                              00000004
MSK5                              00000005
MSK6                              00000006
MSK7                              00000007
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000001
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
OERR                              00000001
OPTION_REG                        00000081
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE 18


SYMBOL TABLE
  LABEL                             VALUE 

OSCCON                            0000008F
OSCTUNE                           00000090
OSFIE                             00000007
OSFIF                             00000007
OSTS                              00000003
P                                 00000004
P1M0                              00000006
P1M1                              00000007
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PDC0                              00000000
PDC1                              00000001
PDC2                              00000002
PDC3                              00000003
PDC4                              00000004
PDC5                              00000005
PDC6                              00000006
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PRINT_SIMB                        
PRINT_STR                         
PRINT_STR_1                       
PRINT_STR_2                       
PRINT_STR_3                       
PRSEN                             00000007
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PSSAC0                            00000002
PSSAC1                            00000003
PSSBD0                            00000000
PSSBD1                            00000001
PSTRCON                           0000009D
PULSR                             00000002
PULSS                             00000003
PWM1CON                           0000009B
PrintFirstStr                     00000000
PrintMsg                          00000000
PrintSecondStr                    00000000
PrintSimb                         00000000
PrintThirdStr                     00000000
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE 19


SYMBOL TABLE
  LABEL                             VALUE 

R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RA6                               00000006
RA7                               00000007
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIDL                             00000006
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
RD0                               00000000
RD1                               00000001
RD2                               00000002
RD3                               00000003
RD4                               00000004
RD5                               00000005
RD6                               00000006
RD7                               00000007
RE0                               00000000
RE1                               00000001
RE2                               00000002
RE3                               00000003
READ_WRITE                        00000002
RP0                               00000005
RP1                               00000006
RSEN                              00000001
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE 20


SYMBOL TABLE
  LABEL                             VALUE 

RX9                               00000006
RX9D                              00000000
R_NOT_W                           00000002
R_W                               00000002
ReadDate                          00000000
ReadDayofWeek                     00000000
ReadRTCData                       00000000
ReadTime                          00000000
S                                 00000003
SBOREN                            00000004
SCKP                              00000004
SCS                               00000000
SEN                               00000000
SENDB                             00000003
SET_BANK0                         00000038
SET_KOMA                          
SMP                               00000007
SPBRG                             00000099
SPBRGH                            0000009A
SPEN                              00000007
SR0                               00000006
SR1                               00000007
SRCON                             00000185
SREN                              00000005
SS                                00000000
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPMSK                            00000093
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
STRA                              00000000
STRB                              00000001
STRC                              00000002
STRD                              00000003
STRSYNC                           00000004
SWDTEN                            00000000
SYNC                              00000004
SetKoma                           00000000
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE 21


SYMBOL TABLE
  LABEL                             VALUE 

T1CKPS1                           00000005
T1CON                             00000010
T1GINV                            00000007
T1GIV                             00000007
T1GSS                             00000001
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1                              0000000E
TMR1CS                            00000001
TMR1GE                            00000006
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISA6                            00000006
TRISA7                            00000007
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000087
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE 22


SYMBOL TABLE
  LABEL                             VALUE 

TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRISD                             00000088
TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
TRISD6                            00000006
TRISD7                            00000007
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRISE3                            00000003
TRMT                              00000001
TUN0                              00000000
TUN1                              00000001
TUN2                              00000002
TUN3                              00000003
TUN4                              00000004
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
UA                                00000001
ULPWUE                            00000005
ULPWUIE                           00000002
ULPWUIF                           00000002
VCFG0                             00000004
VCFG1                             00000005
VR0                               00000000
VR1                               00000001
VR2                               00000002
VR3                               00000003
VRCON                             00000097
VREN                              00000007
VROE                              00000006
VRR                               00000005
VRSS                              00000004
W                                 00000000
WCOL                              00000007
WD                                00000000
WDTCON                            00000105
WDTPS0                            00000001
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE 23


SYMBOL TABLE
  LABEL                             VALUE 

WDTPS1                            00000002
WDTPS2                            00000003
WDTPS3                            00000004
WPUB                              00000095
WPUB0                             00000000
WPUB1                             00000001
WPUB2                             00000002
WPUB3                             00000003
WPUB4                             00000004
WPUB5                             00000005
WPUB6                             00000006
WPUB7                             00000007
WR                                00000001
WREN                              00000002
WRERR                             00000003
WRITE_DATE                        
WRITE_DAY_of_WEEK                 
WRITE_RTC                         
WRITE_TIME                        
WR_IN                             PORTB,1
WUE                               00000001
WriteDate                         00000000
WriteDayofWeek                    00000000
WriteRTC                          00000000
WriteTime                         00000000
YY                                00000000
Z                                 00000002
_.org_1_0036                      00000036
_.org_1_004E                      0000004E
_.org_1_007A                      0000007A
_.org_1_007F                      0000007F
_.org_1_0091                      00000091
_.org_1_00A3                      000000A3
_.org_1_00B8                      000000B8
_.org_1_00BD                      000000BD
_.org_1_00F3                      000000F3
_.org_1_00F8                      000000F8
_.org_1_0125                      00000125
_BOR21V                           00003EFF
_BOR40V                           00003FFF
_BOR4V_BOR21V                     00003EFF
_BOR4V_BOR40V                     00003FFF
_BOREN_NSLEEP                     00003EFF
_BOREN_OFF                        00003CFF
_BOREN_ON                         00003FFF
_BOREN_SBODEN                     00003DFF
_BOR_NSLEEP                       00003EFF
_BOR_OFF                          00003CFF
_BOR_ON                           00003FFF
_BOR_SBODEN                       00003DFF
_CONFIG1                          00002007
_CONFIG2                          00002008
_CPD_OFF                          00003FFF
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE 24


SYMBOL TABLE
  LABEL                             VALUE 

_CPD_ON                           00003F7F
_CP_OFF                           00003FFF
_CP_ON                            00003FBF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         00001FFF
_DEVID1                           00002006
_EC_OSC                           00003FFB
_EXTRC                            00003FFF
_EXTRCIO                          00003FFE
_EXTRC_OSC_CLKOUT                 00003FFF
_EXTRC_OSC_NOCLKOUT               00003FFE
_FCMEN_OFF                        000037FF
_FCMEN_ON                         00003FFF
_FOSC_EC                          00003FFB
_FOSC_EXTRC_CLKOUT                00003FFF
_FOSC_EXTRC_NOCLKOUT              00003FFE
_FOSC_HS                          00003FFA
_FOSC_INTRC_CLKOUT                00003FFD
_FOSC_INTRC_NOCLKOUT              00003FFC
_FOSC_LP                          00003FF8
_FOSC_XT                          00003FF9
_HS_OSC                           00003FFA
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_IESO_OFF                         00003BFF
_IESO_ON                          00003FFF
_INTOSC                           00003FFD
_INTOSCIO                         00003FFC
_INTRC_OSC_CLKOUT                 00003FFD
_INTRC_OSC_NOCLKOUT               00003FFC
_LP_OSC                           00003FF8
_LVP_OFF                          00002FFF
_LVP_ON                           00003FFF
_MCLRE_OFF                        00003FDF
_MCLRE_ON                         00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FEF
_WDTE_OFF                         00003FF7
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FF7
_WDT_ON                           00003FFF
_WRT_1FOURTH                      00003BFF
_WRT_256                          00003DFF
_WRT_HALF                         000039FF
_WRT_OFF                          00003FFF
_XT_OSC                           00003FF9
__16F887                          00000001
__DEBUG                           1
_config1                          00002007
_config2                          00002008
bit_buffer                        00000013
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE 25


SYMBOL TABLE
  LABEL                             VALUE 

bufer_count                       00000012
byte_buffer                       00000014
clr_bufer                         00000039
empty                             00000000
exit_int                          00000033
initMC                            000000FB
init_LCD                          00000000
koma                              00000000
koma_set                          00000000
next_lcd_bit                      00000007
next_lcd_byte                     00000005
pause_05s                         00000000
pause_1s                          00000000
pause_5s                          00000000
seg1_1                            00000000
seg1_2                            00000000
seg1_3                            00000000
seg1_4                            00000000
seg1_5                            00000000
seg2_1                            00000000
seg2_2                            00000000
seg2_3                            00000000
seg2_4                            00000000
seg2_5                            00000000
seg3_1                            00000000
seg3_2                            00000000
seg3_3                            00000000
seg3_4                            00000000
seg3_5                            00000000
seg3_6                            00000000
simb0                             0000007D
simb0_                            000000FD
simb1                             00000060
simb1_                            000000E0
simb2                             0000003E
simb2_                            000000BE
simb3                             0000007A
simb3_                            000000FA
simb4                             00000063
simb4_                            000000E3
simb5                             0000005B
simb5_                            000000DB
simb6                             0000005F
simb6_                            000000DF
simb7                             00000070
simb7_                            000000F0
simb8                             0000007F
simb8_                            000000FF
simb9                             0000007B
simb9_                            000000FB
simbA                             00000077
simbC                             0000001D
simbE                             0000001F
MPASM  5.51                          SCPA.ASM   2-21-2018  11:21:28         PAGE 26


SYMBOL TABLE
  LABEL                             VALUE 

simbF                             00000017
simbG                             0000005D
simbH                             00000067
simbJ                             0000006C
simbL                             0000000D
simbP                             00000037
simbU                             0000006D
simbY                             0000006B
simb_pos                          00000000
simbb                             0000004F
simbd                             0000006E
simbmin                           00000002
simbn                             00000046
simbr                             00000006
simbt                             0000000F
start                             00000042
temp_exit                         0000002F
test_lcd_bytes                    0000001B
time_to_LCD                       000000BA
wait_WR0                          00000007
wait_WR1                          0000000B

Errors   :     0
Warnings :     1 reported,     0 suppressed
Messages :     4 reported,    13 suppressed

